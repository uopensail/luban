#include "pyluban.h"
#include "base64.h"
int main(){
    std::string data = "ChUKDGRfc19uZXdzVHlwZRIFGgMKAQEKaQoNdV9yX2NsaWNrX2ludBJYGlYKVK+/9wWc+PYFhpP2BYKZ9gW5wvYF55L1BZeI9AXh6PUF8rX1Bdb+9AWf4/QF6dTyBfWx8gXt9O8F+YzwBbXO7QWizOsFiIDrBfSf5wWzlecFld/kBQoYCg9kX3NfY29udGVudFR5cGUSBRoDCgEBChMKCWRfcl9jbGljaxIGGgQKAqArChYKDWRfc19jb3ZlclR5cGUSBRoDCgEDCooCCgx1X3JfZF9zX2NhdDES+QEK9gEKDWVudGVydGFpbm1lbnQKCWNvbW11bml0eQoJbGlmZXN0eWxlCghwb2xpdGljcwoIcG9saXRpY3MKCWNvbW11bml0eQoJY29tbXVuaXR5Cghwb2xpdGljcwoJY29tbXVuaXR5CglsaWZlc3R5bGUKDWVudGVydGFpbm1lbnQKDWVudGVydGFpbm1lbnQKCHBvbGl0aWNzCgthcnRfY3VsdHVyZQoJY29tbXVuaXR5Cgljb21tdW5pdHkKBm5hdHVyZQoJY29tbXVuaXR5Cgljb21tdW5pdHkKDWVudGVydGFpbm1lbnQKDWVudGVydGFpbm1lbnQKGQoMZF9yX3JlYWRUaW1lEgkaBwoF8YO15gEK/AEKDHVfcl9kX3NfY2F0MhLrAQroAQoJY2VsZWJyaXR5CgVtZXRybwoMcmVsYXRpb25zaGlwChFwb2xpdGljYWxfc2NhbmRhbAoObG9jYWxfcG9saXRpY3MKBW1ldHJvCgVtZXRybwoObG9jYWxfcG9saXRpY3MKBW1ldHJvCgxyZWxhdGlvbnNoaXAKCWNlbGVicml0eQoJY2VsZWJyaXR5Cg9nbG9iYWxfcG9saXRpY3MKDGNocmlzdGlhbml0eQoFbWV0cm8KBW1ldHJvCgZhbmltYWwKCGFjY2lkZW50CgVtZXRybwoJY2VsZWJyaXR5CgljZWxlYnJpdHkKRQoIdV9kX2NhdHMSOQo3Cg1lbnRlcnRhaW5tZW50Cgljb21tdW5pdHkKCHBvbGl0aWNzCglsaWZlc3R5bGUKBmJlYXV0eQoXCg11Y19tX2ZlZWRGcm9tEgYaBAoC/wEKOwoNZF9zX2NoYW5uZWxJRBIqCigKAjc4CgI2MwoCOTMKAjUxCgMxMTMKAzEyMwoDMTM2CgIzOAoDMTAwCkEKEHVfZF92aWRlb1N1YmNhdHMSLQorCgVtZXRybwoFZGFuY2UKBmh1bW91cgoMbW92aWVfc2VyaWVzCgVjcmltZQoeCg51Y19tX2FwcFNvdXJjZRIMCgoKCGxhdW5jaGVyChIKCXVjX21fZnJvbRIFGgMKAQEKIwoOZF9zX3NvdXJjZU5hbWUSEQoPCg1UaGUgT2xkIFRpbWVzCh0KD2Rfc19wdWJsaXNoVGltZRIKGggKBpDSwLnfLgoSCgl1Y19tX3BhZ2USBRoDCgEIClYKD3VfZF90ZXh0U3ViY2F0cxJDCkEKCWNlbGVicml0eQoFbWV0cm8KDmxvY2FsX3BvbGl0aWNzCg9nbG9iYWxfcG9saXRpY3MKDHJlbGF0aW9uc2hpcAoVCgt1X3NfY291bnRyeRIGCgQKAktFChYKDWRfcl92aWRlb1RpbWUSBRoDCgEACvoBCgp1X2RfdG9waWNzEusBCugBCg1lbl90b3BpYzMyXzMxCg1lbl90b3BpYzMyXzI5Cg1lbl90b3BpYzMyXzMwCg1lbl90b3BpYzMyXzE1Cgxlbl90b3BpYzMyXzUKDWVuX3RvcGljMTI4XzcKDmVuX3RvcGljMTI4XzM4Cg1lbl90b3BpYzEyOF8zCg5lbl90b3BpYzEyOF82OAoOZW5fdG9waWMxMjhfNjcKDmVuX3RvcGljMTI4XzMxCg5lbl90b3BpYzEyOF80NAoNZW5fdG9waWMxMjhfNgoOZW5fdG9waWMxMjhfMjUKD2VuX3RvcGljMTI4XzEwMwrEAQoKdV9yX3NvdXJjZRK1AQqyAQoJQ2VsZWJCdXp6Cg1Tb2NpYWwgU3VydmV5ChBTdHJhbmdlIEJ1dCBUcnVlCgtMaWZlc3R5bGVORwoLIkZha2UiIE5ld3MKDlJlbGlnaW9uIFRydXRoChFWaWRlb0hlYWRsaW5lcyBLRQoQUG9saXRpY3MgTmlnZXJpYQoOVmlkZW8gUmVwdWJsaWMKEEFyb3VuZCBUaGUgV29ybGQKCVRIRSBTVEFSUwoITkcgU3RhcnMKGwoIZF9zX2NhdDESDwoNCgthcnRfY3VsdHVyZQoXCghkX3NfY2F0MhILCgkKB2hpc3RvcnkKHAoQdWNfbV9uZXR3b3JrVHlwZRIICgYKBFdJRkkKWAoPZF9zX2NvdW50cnlDb2RlEkUKQwoCTkcKAktFCgVPVEhFUgoCR0gKAklOCgJUWgoCVUcKAlpNCgJFVAoCUlcKAk1XCgJHTQoCWlcKAlpBCgJTTAoCTFIKOgoOdWNfbV9yZXF1ZXN0SWQSKAomCiRhMjIyMWE5OC01MDAwLTQzYTItYWI0YS1hOWM1NmE5N2RkYjIKGAoOZF9yX2NsaWNrVmFsaWQSBhoECgK+KwoSCgdkX3JfaW1wEgcaBQoDp4wSClEKCHVfcl9jYXQyEkUKQwoFbWV0cm8KCWNlbGVicml0eQoObG9jYWxfcG9saXRpY3MKDHJlbGF0aW9uc2hpcAoRcG9saXRpY2FsX3NjYW5kYWwKGQoIZF9zX3RhZ3MSDQoLCglvdmVyN2RheXMKFgoMZF9zX2xhbmd1YWdlEgYKBAoCZW4KFwoMZF9yX2ltcFZhbGlkEgcaBQoD6MsGCuMBCgl1X3JfY2xpY2sS1QEK0gEKCDEyNDQzNTY3CggxMjQzNDQ2MAoIMTI0MjE1MTAKCDEyNDIyMjc0CggxMjQyNzU3NwoIMTI0MDUwOTUKCDEyMzg3MzUxCggxMjQxNjA5NwoIMTI0MDk1ODYKCDEyNDAyNTE4CggxMjM5OTAwNwoIMTIzNjQzOTMKCDEyMzU5OTI1CggxMjMxOTM0MQoIMTIzMjI0MjUKCDEyMjgxNjUzCggxMjI0ODYxMAoIMTIyMzg4NTYKCDEyMTc3Mzk2CggxMjE3NjA1MQoIMTIxMzYzNDEKEQoFbGFiZWwSCBIGCgQAAIA/ChIKBmRfc19pZBIIGgYKBJDm9QUKzAIKEnVfcl9kX3Nfc291cmNlTmFtZRK1AgqyAgoJQ2VsZWJCdXp6ChBTdHJhbmdlIEJ1dCBUcnVlCg5WaWRlbyBSZXB1YmxpYwoLIkZha2UiIE5ld3MKDlJlbGlnaW9uIFRydXRoCghORyBTdGFycwoNU29jaWFsIFN1cnZleQoOUmVsaWdpb24gVHJ1dGgKEFN0cmFuZ2UgQnV0IFRydWUKC0xpZmVzdHlsZU5HCghORyBTdGFycwoLTGlmZXN0eWxlTkcKCyJGYWtlIiBOZXdzCg5SZWxpZ2lvbiBUcnV0aAoOVmlkZW8gUmVwdWJsaWMKEVZpZGVvSGVhZGxpbmVzIEtFChBQb2xpdGljcyBOaWdlcmlhCg5WaWRlbyBSZXB1YmxpYwoQQXJvdW5kIFRoZSBXb3JsZAoJVEhFIFNUQVJTCghORyBTdGFycwobCg51Y19tX3RpbWVzdGFtcBIJGgcKBYHhgf4FCh4KBnVfc19pZBIUChIKEGM4NTY2ZmI4M2U3ZTg0YmEKHAoHdWNfbV9pcBIRCg8KDTIwMy44MS4xNzcuNTQ=";
    auto ddata = base64_decode(data);
    PyToolKit kit("/Users/gong/Documents/workspace/github.com/uopensail/luban/test/test.toml");
    tensorflow::Features features;
    features.ParseFromString(ddata);

    PyEntity entity;
    kit.process((char*)ddata.c_str(),ddata.size(), entity);
    std::cout<<"here"<<entity.size()<<std::endl;
    for(int i = 0;i < entity.size();i++){
        std::cout<<"size: "<<entity.data_[i]->size<<" gid: "<<entity.data_[i]->gid<<std::endl;
        print_entity(entity.data_[i]);
    }
   
    return 0;
}